function cov_1clujpk5cj(){var path="/Users/deepgill/CPSC-319/TerraScanBackEnd/amplify/backend/function/webhook/src/git/index.js";var hash="6c168760b94d79883cf2aaf446247d368542ad0f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/deepgill/CPSC-319/TerraScanBackEnd/amplify/backend/function/webhook/src/git/index.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:24}},"1":{start:{line:2,column:21},end:{line:2,column:37}},"2":{start:{line:15,column:17},end:{line:38,column:1}},"3":{start:{line:22,column:4},end:{line:24,column:5}},"4":{start:{line:23,column:8},end:{line:23,column:55}},"5":{start:{line:25,column:21},end:{line:25,column:77}},"6":{start:{line:26,column:30},end:{line:26,column:71}},"7":{start:{line:27,column:25},end:{line:27,column:49}},"8":{start:{line:30,column:4},end:{line:33,column:5}},"9":{start:{line:31,column:8},end:{line:31,column:50}},"10":{start:{line:36,column:20},end:{line:36,column:79}},"11":{start:{line:37,column:4},end:{line:37,column:32}},"12":{start:{line:40,column:0},end:{line:40,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:15,column:17},end:{line:15,column:18}},loc:{start:{line:21,column:5},end:{line:38,column:1}},line:21}},branchMap:{"0":{loc:{start:{line:22,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:24,column:5}},{start:{line:22,column:4},end:{line:24,column:5}}],line:22},"1":{loc:{start:{line:22,column:8},end:{line:22,column:57}},type:"binary-expr",locations:[{start:{line:22,column:8},end:{line:22,column:17}},{start:{line:22,column:21},end:{line:22,column:30}},{start:{line:22,column:34},end:{line:22,column:45}},{start:{line:22,column:49},end:{line:22,column:57}}],line:22},"2":{loc:{start:{line:25,column:21},end:{line:25,column:77}},type:"cond-expr",locations:[{start:{line:25,column:45},end:{line:25,column:72}},{start:{line:25,column:75},end:{line:25,column:77}}],line:25},"3":{loc:{start:{line:30,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:33,column:5}},{start:{line:30,column:4},end:{line:33,column:5}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0},b:{"0":[0,0],"1":[0,0,0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c168760b94d79883cf2aaf446247d368542ad0f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1clujpk5cj=function(){return actualCoverage;};}return actualCoverage;}cov_1clujpk5cj();const fs=(cov_1clujpk5cj().s[0]++,require('fs'));const{shHelper}=(cov_1clujpk5cj().s[1]++,require('../sh'));/**
 * Clone and check out a repository at a specific branch
 * @param {string} cloneURL
 * @param {string} repoName
 * @param {string} branchName
 * @param {string} pathStr local folder path in file system
 * @param {string} ghPersonalAccessToken optional token. May be required for private repo cloning
 *
 * Ref:
 * - https://www.freecodecamp.org/news/git-clone-branch-how-to-clone-a-specific-branch/
 */cov_1clujpk5cj().s[2]++;const gitClone=async(cloneURL,repoName,branchName,pathStr,ghPersonalAccessToken)=>{cov_1clujpk5cj().f[0]++;cov_1clujpk5cj().s[3]++;if((cov_1clujpk5cj().b[1][0]++,!cloneURL)||(cov_1clujpk5cj().b[1][1]++,!repoName)||(cov_1clujpk5cj().b[1][2]++,!branchName)||(cov_1clujpk5cj().b[1][3]++,!pathStr)){cov_1clujpk5cj().b[0][0]++;cov_1clujpk5cj().s[4]++;throw new Error('gitClone: Missing Parameters');}else{cov_1clujpk5cj().b[0][1]++;}const tokenStr=(cov_1clujpk5cj().s[5]++,ghPersonalAccessToken?(cov_1clujpk5cj().b[2][0]++,ghPersonalAccessToken+'@'):(cov_1clujpk5cj().b[2][1]++,''));const cloneURLWithToken=(cov_1clujpk5cj().s[6]++,'https://'+tokenStr+cloneURL.slice(8));const branchOption=(cov_1clujpk5cj().s[7]++,`--branch ${branchName}`);// EFS does not create a folder automatically. Must create it first.
cov_1clujpk5cj().s[8]++;if(!fs.existsSync(pathStr)){cov_1clujpk5cj().b[3][0]++;cov_1clujpk5cj().s[9]++;fs.mkdirSync(pathStr,{recursive:true});// https://stackoverflow.com/a/26815894
}else{cov_1clujpk5cj().b[3][1]++;}// clone repo at a specific branch to a path determined by pathStr
const command=(cov_1clujpk5cj().s[10]++,`git clone ${branchOption} ${cloneURLWithToken} ${pathStr}`);cov_1clujpk5cj().s[11]++;await shHelper.exec(command);};cov_1clujpk5cj().s[12]++;module.exports={gitClone};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsInNoSGVscGVyIiwiZ2l0Q2xvbmUiLCJjbG9uZVVSTCIsInJlcG9OYW1lIiwiYnJhbmNoTmFtZSIsInBhdGhTdHIiLCJnaFBlcnNvbmFsQWNjZXNzVG9rZW4iLCJFcnJvciIsInRva2VuU3RyIiwiY2xvbmVVUkxXaXRoVG9rZW4iLCJzbGljZSIsImJyYW5jaE9wdGlvbiIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJjb21tYW5kIiwiZXhlYyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI2L0VBZVk7MkZBZlosS0FBTUEsQ0FBQUEsRUFBRSwwQkFBR0MsT0FBTyxDQUFDLElBQUQsQ0FBVixDQUFSLENBQ0EsS0FBTSxDQUFFQyxRQUFGLDJCQUFlRCxPQUFPLENBQUMsT0FBRCxDQUF0QixDQUFOLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHLHdCQUNBLEtBQU1FLENBQUFBLFFBQVEsQ0FBRyxNQUNiQyxRQURhLENBRWJDLFFBRmEsQ0FHYkMsVUFIYSxDQUliQyxPQUphLENBS2JDLHFCQUxhLEdBTVosaURBQ0QsR0FBSSw2QkFBQ0osUUFBRCwrQkFBYSxDQUFDQyxRQUFkLCtCQUEwQixDQUFDQyxVQUEzQiwrQkFBeUMsQ0FBQ0MsT0FBMUMsQ0FBSixDQUF1RCxvREFDbkQsS0FBTSxJQUFJRSxDQUFBQSxLQUFKLENBQVUsOEJBQVYsQ0FBTixDQUNILENBRkQsaUNBR0EsS0FBTUMsQ0FBQUEsUUFBUSwwQkFBR0YscUJBQXFCLDZCQUFHQSxxQkFBcUIsQ0FBRyxHQUEzQiw4QkFBaUMsRUFBakMsQ0FBeEIsQ0FBZCxDQUNBLEtBQU1HLENBQUFBLGlCQUFpQiwwQkFBRyxXQUFhRCxRQUFiLENBQXdCTixRQUFRLENBQUNRLEtBQVQsQ0FBZSxDQUFmLENBQTNCLENBQXZCLENBQ0EsS0FBTUMsQ0FBQUEsWUFBWSwwQkFBSSxZQUFXUCxVQUFXLEVBQTFCLENBQWxCLENBRUE7QUFSQyx3QkFTRCxHQUFJLENBQUNOLEVBQUUsQ0FBQ2MsVUFBSCxDQUFjUCxPQUFkLENBQUwsQ0FBNkIsb0RBQ3pCUCxFQUFFLENBQUNlLFNBQUgsQ0FBYVIsT0FBYixDQUFzQixDQUFFUyxTQUFTLENBQUUsSUFBYixDQUF0QixFQUNBO0FBQ0gsQ0FIRCxpQ0FLQTtBQUNBLEtBQU1DLENBQUFBLE9BQU8sMkJBQUksYUFBWUosWUFBYSxJQUFHRixpQkFBa0IsSUFBR0osT0FBUSxFQUE3RCxDQUFiLENBZkMseUJBZ0JELEtBQU1MLENBQUFBLFFBQVEsQ0FBQ2dCLElBQVQsQ0FBY0QsT0FBZCxDQUFOLENBQ0gsQ0F2QkQsQyx5QkF5QkFFLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFFakIsUUFBRixDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKVxuY29uc3QgeyBzaEhlbHBlciB9ID0gcmVxdWlyZSgnLi4vc2gnKVxuXG4vKipcbiAqIENsb25lIGFuZCBjaGVjayBvdXQgYSByZXBvc2l0b3J5IGF0IGEgc3BlY2lmaWMgYnJhbmNoXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xvbmVVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXBvTmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IGJyYW5jaE5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoU3RyIGxvY2FsIGZvbGRlciBwYXRoIGluIGZpbGUgc3lzdGVtXG4gKiBAcGFyYW0ge3N0cmluZ30gZ2hQZXJzb25hbEFjY2Vzc1Rva2VuIG9wdGlvbmFsIHRva2VuLiBNYXkgYmUgcmVxdWlyZWQgZm9yIHByaXZhdGUgcmVwbyBjbG9uaW5nXG4gKlxuICogUmVmOlxuICogLSBodHRwczovL3d3dy5mcmVlY29kZWNhbXAub3JnL25ld3MvZ2l0LWNsb25lLWJyYW5jaC1ob3ctdG8tY2xvbmUtYS1zcGVjaWZpYy1icmFuY2gvXG4gKi9cbmNvbnN0IGdpdENsb25lID0gYXN5bmMgKFxuICAgIGNsb25lVVJMLFxuICAgIHJlcG9OYW1lLFxuICAgIGJyYW5jaE5hbWUsXG4gICAgcGF0aFN0cixcbiAgICBnaFBlcnNvbmFsQWNjZXNzVG9rZW5cbikgPT4ge1xuICAgIGlmICghY2xvbmVVUkwgfHwgIXJlcG9OYW1lIHx8ICFicmFuY2hOYW1lIHx8ICFwYXRoU3RyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZ2l0Q2xvbmU6IE1pc3NpbmcgUGFyYW1ldGVycycpXG4gICAgfVxuICAgIGNvbnN0IHRva2VuU3RyID0gZ2hQZXJzb25hbEFjY2Vzc1Rva2VuID8gZ2hQZXJzb25hbEFjY2Vzc1Rva2VuICsgJ0AnIDogJydcbiAgICBjb25zdCBjbG9uZVVSTFdpdGhUb2tlbiA9ICdodHRwczovLycgKyB0b2tlblN0ciArIGNsb25lVVJMLnNsaWNlKDgpXG4gICAgY29uc3QgYnJhbmNoT3B0aW9uID0gYC0tYnJhbmNoICR7YnJhbmNoTmFtZX1gXG5cbiAgICAvLyBFRlMgZG9lcyBub3QgY3JlYXRlIGEgZm9sZGVyIGF1dG9tYXRpY2FsbHkuIE11c3QgY3JlYXRlIGl0IGZpcnN0LlxuICAgIGlmICghZnMuZXhpc3RzU3luYyhwYXRoU3RyKSkge1xuICAgICAgICBmcy5ta2RpclN5bmMocGF0aFN0ciwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2ODE1ODk0XG4gICAgfVxuXG4gICAgLy8gY2xvbmUgcmVwbyBhdCBhIHNwZWNpZmljIGJyYW5jaCB0byBhIHBhdGggZGV0ZXJtaW5lZCBieSBwYXRoU3RyXG4gICAgY29uc3QgY29tbWFuZCA9IGBnaXQgY2xvbmUgJHticmFuY2hPcHRpb259ICR7Y2xvbmVVUkxXaXRoVG9rZW59ICR7cGF0aFN0cn1gXG4gICAgYXdhaXQgc2hIZWxwZXIuZXhlYyhjb21tYW5kKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgZ2l0Q2xvbmUgfVxuIl19